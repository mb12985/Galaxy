{"version":3,"file":"metrics-logger.js","sources":["../../src/utils/metrics-logger.js"],"names":["define","MetricsLogger","options","self","this","userId","window","bootstrapped","user","id","consoleLogger","_init","LoggingCache","ALL","DEBUG","INFO","WARN","ERROR","METRIC","NONE","defaultOptions","logLevel","consoleLevel","defaultNamespace","clientPrefix","maxCacheSize","postSize","addTime","cacheKeyPrefix","postUrl","delayPostInMs","getPingData","undefined","onServerResponse","prototype","k","hasOwnProperty","_parseLevel","_sending","_waiting","_postSize","_initCache","cache","maxSize","key","err","_emitToConsole","level","type","upper","toUpperCase","Error","emit","namespace","logArguments","_addToCache","arguments","length","newLength","add","_buildEntry","_postCache","entry","args","time","Date","toISOString","jQuery","when","count","entries","get","entriesLength","postData","metrics","JSON","stringify","post","always","fail","xhr","readyState","status","responseJSON","responseText","done","response","remove","_delayPost","setTimeout","Array","slice","call","unshift","info","apply","error","warn","debug","log","metric","_hasStorage","_initStorage","test","localStorage","setItem","removeItem","e","getItem","empty","_cache","_fetchAndParse","overage","splice","push","_unparseAndStore","parse","removed","print"],"mappings":"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"}