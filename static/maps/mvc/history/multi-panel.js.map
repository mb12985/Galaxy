{"version":3,"file":"multi-panel.js","sources":["../../../src/mvc/history/multi-panel.js"],"names":["define","HISTORY_MODEL","HPANEL_EDIT","baseMVC","ajaxQueue","historyCopyDialog","history","options","validateName","name","Galaxy","modal","$","size","$invalidTitle","attr","css","color","margin-top","addClass","text","_l","append","copyHistory","$copyIndicator","copy","fail","alert","always","hide","checkNameAndCopy","val","historyName","get","defaultCopyName","show","_","extend","title","body","join","buttons","Cancel","Copy","focus","select","on","ev","keyCode","HistoryPanelColumn","Backbone","View","LoggableMixin","tagName","className","id","this","model","initialize","purgeAllowed","isUndefined","panel","createPanel","setUpListeners","panelOptions","dragItems","HistoryPanelEdit","_renderEmptyMessage","__patch_renderEmptyMessage","$whereTo","newMsg","empty","$emptyMsg","$emptyMessage","isEmpty","hdaViews","emptyMsg","contents","length","searchFor","mixed","find","c","haveDetails","noneFoundMsg","column","once","trigger","setUpPanelListeners","listenTo","rendered","inView","viewLeft","viewRight","columnLeft","$el","offset","left","columnRight","width","$panel","render","speed","undefined","modelData","toJSON","html","template","renderPanel","setUpBehaviors","data","isCurrentHistory","currentHistory","controlsLeftTemplate","view","controlsRightTemplate","setElement","$list","before","_renderDropTargetHelp","events","click .switch-to.btn","setAsCurrent","click .delete-history","_delete","xhr","status","error","done","click .undelete-history","undelete","click .purge-history","confirm","purge","click .copy-history","variable","toString","MultiPanelColumns","log","columnWidth","borderWidth","columnGap","headerHeight","footerHeight","controlsHeight","perPage","hdaQueue","NamedAjaxQueue","collection","columnMap","columnOptions","historySearch","datasetSearch","setCollection","histories","multipanel","fetch","limit","stopListening","HistoryCollection","allFetched","setUpCollectionListeners","sort","silent","createColumns","clear","addModels","models","isArray","forEach","addColumn","_ajaxErrorHandler","add","all-fetched","_postFetchAll","new-current","addAsCurrentColumn","set-as-current","setCurrentHistory","change:deleted change:purged","handleDeletedHistory","renderColumns","remove","$scrollContainer","scrollLeft","oldCurrentColumn","findWhere","height","newCurrentColumn","currentHistoryId","_recalcFirstColumnHeight","includeDeleted","removeColumn","errArgs","toArray","arguments","window","handleErrors","apply","create","current","each","createColumn","config","allow_user_dataset_purge","setUpColumnListeners","searchItems","queueHdaFetchDetails","newColumn","queueHdaFetch","widthToRemove","fadeOut","checkColumnsInView","in-view","view:draggable:dragstart","_dropData","JSON","parse","dataTransfer","getData","currentColumnDropTargetOn","view:draggable:dragend","currentColumnDropTargetOff","droptarget:drop","toCopy","filter","json","isCopyable","queue","content","fn","start","columnMapLength","Object","keys","sortedFilteredColumns","filters","sortedColumns","filtered","every","map","call","sorted","fxSpeed","mainTemplate","sortedAndFiltered","$middle","_calcMiddleWidth","appendTo","delegateEvents","renderColumn","loadingIndicatorTemplate","numColumns","preventStackWidthAdj","xhrData","ids","values","storage","dataset_details","renderItems","running","details","renderInfo","msg","click .done.btn","click .create-new.btn","click #include-deleted","click .order .set-order","click #toggle-deleted","click #toggle-hidden","close","destination","root","galaxy_config","location","_clickToggleDeletedHistories","toggleDeletedHistories","currentTarget","is","toggleOptionsPopover","_clickToggleDeletedDatasets","toggleDeletedDatasets","i","delay","toggleShowDeleted","_clickToggleHiddenDatasets","toggleHiddenDatasets","toggleShowHidden","_chooseOrder","orderKey","orderDescriptions","setOrder","reset","slice","_scrollLeft","_moreOptionsPopover","searchInput","placeholder","onfirstsearch","onsearch","matchesAll","onclear","progress","curr","total","deferred","clearSearch","resize","debouncedInView","debounce","viewport","_viewport","checkForEndOfScroll","parent","scroll","popover","container","placement","optionsPopoverTemplate","$firstColumn","first","middleHeight","controlHeight","$outerMiddle","right","columnsInView","vp","END_PADDING","scrollRight","currentColumn","dataDropped","dropTargetOn","prototype","dataDrop","dropTarget","columns","update_time","update_time-asc","name-dsc","size-asc"],"mappings":"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"}